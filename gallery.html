<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gallery - SOOJI_NOOLUM</title>
<meta name="description" content="Browse our collection of custom apparel and clothing designs">
<link rel="icon" href="/favicon.ico">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<!-- Page-local styles just for the gallery filters -->
<style>
  .gallery-filters {
    display: flex;
    gap: 15px;
    justify-content: center;
    align-items: center;
    margin: 40px auto;
    flex-wrap: wrap;
    padding: 0 20px;
    max-width: 900px;
  }
  .filter-btn {
    padding: 14px 28px;
    border: 2px solid var(--border-color);
    background: var(--white);
    border-radius: 30px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    font-size: 15px;
    text-transform: capitalize;
    font-family: 'Inter', sans-serif;
  }
  .filter-btn.active {
    background: var(--gradient-primary);
    color: var(--white);
    border-color: var(--primary-color);
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.3);
  }
  .filter-btn:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
  }
  .filter-btn.active:hover {
    color: var(--white);
  }
  .gallery-item[hidden] { display: none !important; }
  .empty-state {
    text-align: center;
    color: var(--text-light);
    padding: 60px 20px;
    display: none;
    font-size: 18px;
    font-weight: 500;
  }
  .empty-state.show { display: block; }
  
  /* Enhanced gallery image styling for proper focus */
  .gallery-image {
    position: relative;
    height: 400px;
    background-size: cover;
    background-position: center;
    overflow: hidden;
    border-radius: 12px 12px 0 0;
  }
  .gallery-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    display: block;
  }
  
  /* Loading state */
  .gallery-grid.loading {
    opacity: 0.5;
    pointer-events: none;
  }
  .loading-message {
    text-align: center;
    padding: 80px 20px;
    font-size: 18px;
    color: var(--text-light);
    font-weight: 500;
  }
  
  /* Improved gallery grid layout */
  .gallery-section {
    padding: 60px 20px;
    background: var(--bg-light);
  }
</style>
</head>
<body>
<header>
<div class="container nav">
  <div class="brand">
    <div class="logo">
      <img src="images/logo.jpg" alt="SOOJI_NOOLUM Logo">
    </div>
    <div>
      <div class="title">SOOJI_NOOLUM</div>
      <div class="small">Custom Apparel & Clothing</div>
    </div>
  </div>
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="gallery.html">Gallery</a></li>
      <li><a href="about.html">About Us</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </nav>
</div>
</header>

<main>
  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <h1 class="page-title">Our Gallery</h1>
      <p class="page-subtitle">Explore our exquisite collection of custom-made apparel</p>
    </div>
  </section>

  <!-- Gallery + Filters -->
  <section class="gallery-section">
    <div class="container">

      <!-- Filter Tabs (dynamically populated) -->
      <div class="gallery-filters" id="galleryFilters">
        <button class="filter-btn active" data-filter="all">All</button>
      </div>

      <div class="empty-state" id="emptyState">No photos in this category yet.</div>

      <!-- Image Grid (dynamically populated) -->
      <div class="gallery-grid" id="galleryGrid">
        <div class="loading-message">Loading gallery...</div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2>Looking for Something Custom?</h2>
        <p>Let us create a unique piece just for you</p>
        <a href="contact.html" class="btn btn-primary btn-large">Contact Us</a>
      </div>
    </div>
  </section>
</main>

<footer>
<div class="container">
  <div class="footer-content">
    <div class="footer-brand">
      <div class="brand">
          <div class="logo">
              <img src="images/logo.jpg" alt="SOOJI_NOOLUM Logo" />
            </div>
        <div>
          <div class="title">SOOJI_NOOLUM</div>
          <div class="small">Custom Apparel & Clothing</div>
        </div>
      </div>
    </div>
    <div class="footer-links">
      <a href="index.html">Home</a>
      <a href="gallery.html">Gallery</a>
      <a href="about.html">About Us</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p class="footer-developer">Designed and Developed by <a href="https://linkedin.com/in/roshni-a-s-545a6215a/" target="_blank" rel="noopener noreferrer" class="footer-credit">Roshni Stephen</a></p>
    <p class="footer-powered">Powered by <a href="https://lokaai.in" target="_blank" rel="noopener noreferrer" class="loka-link">LOKA AI</a> â€“ Smart AI tools for daily life</p>
  </div>
</div>
</footer>

<script src="script.js"></script>

<!-- Page-local JS: Dynamic gallery loading + Category filtering + deep link -->
<script>
(function () {
  const filtersContainer = document.getElementById('galleryFilters');
  const gridContainer = document.getElementById('galleryGrid');
  const emptyState = document.getElementById('emptyState');
  let galleryItems = [];
  let filterButtons = [];

  /**
   * Load manifest.json and initialize gallery
   */
  async function loadGallery() {
    try {
      const response = await fetch('manifest.json');
      if (!response.ok) {
        throw new Error('Failed to load manifest.json');
      }
      const manifest = await response.json();
      
      // Build filter buttons from categories
      buildFilterButtons(manifest.categories);
      
      // Build gallery items from images
      buildGalleryItems(manifest.images);
      
      // Set up filtering
      setupFiltering();
      
      // Handle deep links (e.g., gallery.html#wedding)
      handleDeepLink();
      
    } catch (error) {
      console.error('Error loading gallery:', error);
      gridContainer.innerHTML = '<div class="loading-message" style="color: #dc3545;">Error loading gallery. Please refresh the page.</div>';
    }
  }

  /**
   * Build filter buttons from categories
   */
  function buildFilterButtons(categories) {
    // Keep the "All" button that already exists
    const allButton = filtersContainer.querySelector('.filter-btn[data-filter="all"]');
    
    // Add category buttons
    Object.keys(categories).forEach(categoryKey => {
      const category = categories[categoryKey];
      const button = document.createElement('button');
      button.className = 'filter-btn';
      button.dataset.filter = categoryKey;
      button.textContent = category.name;
      filtersContainer.appendChild(button);
    });
    
    filterButtons = filtersContainer.querySelectorAll('.filter-btn');
  }

  /**
   * Build gallery items from images array
   */
  function buildGalleryItems(images) {
    gridContainer.innerHTML = ''; // Clear loading message
    
    images.forEach(image => {
      const item = createGalleryItem(image);
      gridContainer.appendChild(item);
    });
    
    galleryItems = gridContainer.querySelectorAll('.gallery-item');
  }

  /**
   * Create a single gallery item element
   */
  function createGalleryItem(image) {
    const link = document.createElement('a');
    link.className = 'gallery-item';
    link.dataset.category = image.category;
    link.href = image.path;
    link.target = '_blank';
    link.rel = 'noopener';
    
    const imageDiv = document.createElement('div');
    imageDiv.className = 'gallery-image';
    
    const img = document.createElement('img');
    img.src = image.path;
    img.alt = image.title;
    img.loading = 'lazy';
    
    imageDiv.appendChild(img);
    
    if (image.available) {
      const tag = document.createElement('span');
      tag.className = 'availability-tag available';
      tag.textContent = 'Available';
      imageDiv.appendChild(tag);
    }
    
    const info = document.createElement('div');
    info.className = 'gallery-info';
    
    const title = document.createElement('h3');
    title.textContent = image.title;
    
    const description = document.createElement('p');
    description.className = 'product-description';
    description.textContent = image.description;
    
    info.appendChild(title);
    info.appendChild(description);
    
    link.appendChild(imageDiv);
    link.appendChild(info);
    
    return link;
  }

  /**
   * Set up filtering functionality
   */
  function setupFiltering() {
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        // Update active state
        filterButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        // Apply filter
        const category = btn.dataset.filter;
        applyFilter(category);
        
        // Update URL hash
        history.replaceState(null, '', `#${category}`);
      });
    });
  }

  /**
   * Apply category filter to gallery items
   */
  function applyFilter(category) {
    let visibleCount = 0;
    
    galleryItems.forEach(item => {
      const match = category === 'all' || item.dataset.category === category;
      item.hidden = !match;
      if (match) visibleCount++;
    });
    
    // Show/hide empty state
    emptyState.classList.toggle('show', visibleCount === 0);
  }

  /**
   * Handle deep links (e.g., gallery.html#wedding)
   */
  function handleDeepLink() {
    const hash = (location.hash || '#all').replace('#', '');
    const targetButton = Array.from(filterButtons).find(btn => btn.dataset.filter === hash);
    
    if (targetButton) {
      targetButton.click();
    } else {
      filterButtons[0].click(); // Default to "All"
    }
  }

  // Initialize gallery on page load
  loadGallery();
})();
</script>
</body>
</html>
